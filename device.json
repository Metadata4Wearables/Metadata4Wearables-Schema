{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "https://github.com/cdsig/CDSIG-Schema/blob/main/device.json",
  "title": "Acquisition device",
  "description": "Information about the data acquisition device",
  "type": "object",
  "properties": {
    "device_uuid": {
      "description": "MD5 hash generated from the `name` field.",
      "example": "9b4cef4132e84329bc38dda4b2fa3f5b",
      "type": "string"
    },
    "device_manufacturer": {
      "description": "Manufacturer of the device",
      "example": "",
      "type": "string"
    },
    "device_model": {
      "description": "Model of the device",
      "example": "",
      "type": "string"
    },
    "device_serial_number": {
      "description": "Serial number of the device",
      "example": "",
      "type": "string"
    },
    "device_sensors": {
      "description": "Sensors included in the device",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "device_sensor_internal_id": {
            "description": "Internal ID of the sensor",
            "example": "1",
            "type": "number"
          },
          "device_sensor_name": {
            "description": "Name of the sensor",
            "example": "Motion sensor",
            "type": "string"
          },
          "device_sensor_category": {
            "description": "Category of data acquired by the sensor",
            "enum": ["motion", "light", "temperature"]
          }
        },
        "required": [
          "device_sensor_internal_id",
          "device_sensor_name",
          "device_sensor_category"
        ],
        "allOf": [
          {
            "if": {
              "properties": { "device_sensor_category": { "const": "motion" } }
            },
            "then": {
              "properties": {
                "sensor": {
                  "$ref": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_motion.json"
                }
              },
              "required": ["device_sensor"]
            }
          },
          {
            "if": {
              "properties": { "device_sensor_category": { "const": "light" } }
            },
            "then": {
              "properties": {
                "sensor": {
                  "$ref": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_light.json"
                }
              },
              "required": ["device_sensor"]
            }
          },
          {
            "if": {
              "properties": { "device_sensor_category": { "const": "temperature" } }
            },
            "then": {
              "properties": {
                "sensor": {
                  "$ref": "https://github.com/cdsig/CDSIG-Schema/blob/main/sensor_temperature.json"
                }
              },
              "required": ["device_sensor"]
            }
          }
        ]
      },
      "minItems": 1,
      "uniqueItems": true
    }
  },
  "required": ["uuid", "manufacturer", "model", "serial_number"]
}
